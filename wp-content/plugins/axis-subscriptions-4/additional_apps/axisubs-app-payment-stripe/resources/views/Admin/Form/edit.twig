{% extends '@AxisubsAppStripe/Admin/tabs/tab.twig' %}

{% block body %}
<div class="axisubs wrap">
    <h2>{{ pagetitle }}
    </h2>
    {% set metaPrefix = item['ID']~'_'~item['post_type']~'_' %}
    <form method="post" action="?page=app-index&task=appTask&p=axisubs-app-payment-stripe">
        <div class="axisubs-fields-con">
            <div class="axisubs-fields">
                <span class="text">For recurring payment please add Webhook <b>URL: {site path}/?axisubs_plan=plans&task=paymentComplete&payment_type=axisubs-app-payment-stripe&apptask=notify</b> <br>for the <b>Event: customer.subscription.updated</b></span>
            </div>
            <div class="axisubs-fields">
                <div class="axisubs-fields-label">
                    <label for="axisub_payment_title">Payment title</label>
                </div>
                <div class="axisubs-fields-content">
                    <input type="text" class="required" name="axisubs[payment][title]" id="axisub_payment_title" value="{{ item['meta'][metaPrefix~'title'] }}"/>
                    <span class="help-text">The title of the payment plugin, as displayed in the checkout page. If left blank, default value Paypal Payment will be used.</span>
                </div>
            </div>
            <div class="axisubs-fields">
                <div class="axisubs-fields-label">
                    <label for="axisub_payment_image">Payment Display Image</label>
                </div>
                <div class="axisubs-fields-content">
                    <input type="text" class="required" name="axisubs[payment][image]" id="axisub_payment_image" value="{{ item['meta'][metaPrefix~'image'] }}"/>
                    <span class="help-text">Image shown while payment options are listed in checkout page.</span>
                </div>
            </div>
            <div class="axisubs-fields">
                <div class="axisubs-fields-label">
                    <label for="axisub_payment_sandbox">Test/Live</label>
                </div>
                <div class="axisubs-fields-content">
                    <select id="axisub_payment_sandbox" name="axisubs[payment][sandbox]">
                        {% set selected = item['meta'][metaPrefix~'sandbox'] %}
                        <option value="0" {% if selected == '0' %} selected {% endif %}>Live</option>
                        <option value="1" {% if selected == '1' %} selected {% endif %}>Test</option>
                    </select>
                    <span class="help-text">Test or live payment.</span>
                </div>
            </div>
            <div class="axisubs-fields">
                <div class="axisubs-fields-label">
                    <label for="axisub_payment_test_secret_key">Test Secret Key</label>
                </div>
                <div class="axisubs-fields-content">
                    <input type="text" class="required" name="axisubs[payment][test_secret_key]" id="axisub_payment_test_secret_key" value="{{ item['meta'][metaPrefix~'test_secret_key'] }}"/>
                    <span class="help-text">Test Secret Key - API.</span>
                </div>
            </div>
            <div class="axisubs-fields">
                <div class="axisubs-fields-label">
                    <label for="axisub_payment_test_publishable_key">Test Publishable Key</label>
                </div>
                <div class="axisubs-fields-content">
                    <input type="text" class="required" name="axisubs[payment][test_publishable_key]" id="axisub_payment_test_publishable_key" value="{{ item['meta'][metaPrefix~'test_publishable_key'] }}"/>
                    <span class="help-text">Test Publishable Key - API.</span>
                </div>
            </div>
            <div class="axisubs-fields">
                <div class="axisubs-fields-label">
                    <label for="axisub_payment_live_secret_key">Live Secret Key</label>
                </div>
                <div class="axisubs-fields-content">
                    <input type="text" class="required" name="axisubs[payment][live_secret_key]" id="axisub_payment_live_secret_key" value="{{ item['meta'][metaPrefix~'live_secret_key'] }}"/>
                    <span class="help-text">Live Secret Key - API.</span>
                </div>
            </div>
            <div class="axisubs-fields">
                <div class="axisubs-fields-label">
                    <label for="axisub_payment_live_publishable_key">Live Publishable Key</label>
                </div>
                <div class="axisubs-fields-content">
                    <input type="text" class="required" name="axisubs[payment][live_publishable_key]" id="axisub_payment_live_publishable_key" value="{{ item['meta'][metaPrefix~'live_publishable_key'] }}"/>
                    <span class="help-text">Live Publishable Key - API.</span>
                </div>
            </div>
            <div class="axisubs-fields">
                <div class="axisubs-fields-label">
                    <input type="hidden" name="task" value="appTask"/>
                    <input type="hidden" name="apptask" value="save"/>
                </div>
                <div class="axisubs-fields-content page-btn">
                    <button type="submit" class="btn page-title-action">Save</button>
                    <a href="?page=app-index" class="btn page-title-action">Cancel</a>
                </div>
            </div>
        </div>
     </form>
</div>
{% endblock %}